
# Инструкция по сборке программ

Сборка программ осуществляется с использованием предоставленной структуры
каталогов и файлов, которая существует в директории **angtel-projects**. Ниже
приводится описание организации этой директории, а также последовательность
шагов, выполнение которых необходимо для корректной сборки программ.

## Подготовительные операции

Прежде чем приступить к сборке программ необходимо скопировать директорию
**angtel-projects** в свой домашний каталог. Для этого необходимо,
прежде всего, определить где находится директория **netprog2** относительно
корневого каталога (**/**). В директории **netprog2** содержатся исходные файлы
проекта. Определив указанный путь (назовем его path_to_netprog2),
выполните приведенные ниже команды:

```console
$ cp -R /path_to_netprog2/build/angtel-projects ~/
$ cd ~/angtel-projects
```

После выполнения указанных команд Вы окажетесь в директории
**angtel-projects**, расположенной в домашнем каталоге.

## Структура каталогов

В директории **angtel-projects** содержаться каталоги с названиями **lab_XX** и
**exercise_XX_Y**. В каталогах первого типа выполняются лабораторные работы,
в каталогах второго типа - упражнения к лабораторным работам. Также в
директории **angtel-projects** находится общий для всех типов работ makefile, который называется **common&#46;mk**.

Рассмотрим структуру каталога **lab_XX**. Для каталога **exercise_XX_Y** она
является аналогичной. В каталоге **lab_XX** обычно располагаются подкаталоги:
**src**, **include**, **deps** и **build**. Исходные файлы располагаются в
подкаталоге **src**, заголовочные в **include**. Все каталоги кроме **src**
могут отсутствовать. Помимо этого, в каталоге **lab_XX** имеется частный
makefile с именем **Makefile**. Частный makefile содержит следующую информацию:

```make
EXE_NAME = hello_world

MAIN_MAKEFILE = ../common.mk
include $(MAIN_MAKEFILE)
```

Здесь **EXE_NAME** это имя исполняемого файла, получающегося в результате
сборки программы, **MAIN_MAKEFILE** - путь к общему makefile относительно
каталога **lab_XX**.

## Алгоритм сборки

1. Перейти в каталог **lab_XX**.

    ```console
    $ cd ~/angtel-projects/lab_XX
    ```

2. Поместить файлы с исходным кодом (*.c) в каталог **src**.

3. Поместить (если нужно) заголовочные файлы (*.h) в каталог **include**.

4. Задать в частном makefile с именем **Makefile**, который находится в текущем
   каталоге, желаемое имя исполняемого файла. Для этого необходимо установить
   для переменной **EXE_NAME** соответствующее значение.

5. Собрать исполняемый файл.

    ```console
    $ make
    ```

6. Записать исполняемый файл на плату.

    ```console
    $ make install
    ```

## Дополнительные действия

1. Очистка директории от файлов, появившихся во время сборки.

    ```console
    $ make clean
    ```

2. Удаление исполняемого файла с платы.

    ```console
    $ make uninstall
    ```

3. Вывод списка доступных действий.

    ```console
    $ make help
    ```
