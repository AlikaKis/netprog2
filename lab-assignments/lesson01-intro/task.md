
# Базовая задача

Разработать консольное приложение для встроенной ОС Linux, реализующее
последовательность арифметических операций, заданную в командной строке.

## Алгоритм решения базовой задачи

1. Прочитать из потока стандартного ввода (stdin) строку текста с помощью
   функции [getline(3)][1]. Строка состоит из натуральных чисел, разделенных
   арифметическими знаками сложения или вычитания. Между числами и знаками
   допускается произвольное количество пробелов. Примеры допустимых строк:

   - 54+123-566
   - 987 &nbsp;&nbsp;&nbsp; -2 + 87

2. Инициализировать нулем переменную-аккумулятор `count`.

3. Реализовать цикл перебора чисел, входящих во введенную строку. На каждой
   итерации число либо добавляется, либо вычитается из аккумулятора в
   зависимости от предшествующего ему знака. Поиск следующего знака
   (и соответственно, следующей цифры) производится либо с помощью
   [strchr(3)][2], либо с помощью [strtok(3)][3]. Преобразование строки в число
   выполняется функцией [atoi(3)][4] или [strtoul(3)][5].

4. Вывести в терминал итоговое значение переменной-аккумулятора `count`.

5. Завершить программу.

[1]: https://www.opennet.ru/man.shtml?topic=getline&category=3&russian=0
[2]: https://www.opennet.ru/man.shtml?topic=strchr&category=3&russian=0
[3]: https://www.opennet.ru/man.shtml?topic=strtok&category=3&russian=0
[4]: https://www.opennet.ru/man.shtml?topic=atoi&category=3&russian=0
[5]: https://www.opennet.ru/man.shtml?topic=strtoul&category=3&russian=0

## Примеры для базовой задачи

1. Чтение строки из стандартного потока ввода.

    ```c
    #include <stdio.h>

    char *line = NULL;
    size_t lsize = 0, ret;

    ret = getline(&line, &lsize, stdin);
    ```

   Инициализация переменных `line` и `lsize` нулем означает, что память
   под строку выделяется динамически внутри вызова `getline`. Эта память
   должна быть в итоге освобождена с помощью функции [free(3)][6].

2. Поиск разделительного символа `@` в строке `str`.

    ```c
    #include <string.h>

    char *sep;

    sep = strchr(str, '@');
    if (sep) {
            printf("Found character @ at position %t\n", sep - str);
    } else {
            printf("Character @ not found\n");
    }
    ```

3. Выделение памяти под динамический массив объектов размером `n`.

    ```c
    #include <stdlib.h>

    struct {
            enum op_type op;
            unsigned int value;
    } *ops;

    ops = calloc(n, sizeof(*ops));
    ```

4. Перебор элементов строки `str`, разделенных символами `@` или `#`,
   с помощью функции `strtok`.

    ```c
    #include <string.h>

    char *token;

    token = strtok(str, "@#");
    while (token) {
            analyse_token(token);
            token = strtok(NULL, "@#");
    };
    ```

[6]: https://www.opennet.ru/man.shtml?topic=free&category=3&russian=0

# Усложненная задача

В дополнение к базовой задаче необходимо реализовать операции умножения и
деления. Все арифметические действия выполняются в таком же порядке, что и в
языке C. Задачу предлагается решать за счет перевода введенной строки во
внутреннее представление - динамический массив объектов, каждый из которых
описывает одну арифметическую операцию и аргумент.
